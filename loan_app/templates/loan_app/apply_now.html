{% extends 'loan_app/base.html' %}
{% load static %}
{% block title %}Apply Now{% endblock title %}
{% block content %}
<!-- Navbar & Hero Start -->
<div class="container-fluid nav-bar px-0 px-lg-4 py-lg-0">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light"> 
            <a href="#" class="navbar-brand p-0">
                <img src="{% static 'loan_app/assets/steller-logo.png' %}" alt="Logo" style="width: 200px;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav mx-0 mx-lg-auto">
                    <a href="{% url 'home' %}" class="nav-item nav-link">Home</a>
                    <a href="{% url 'about' %}" class="nav-item nav-link">About</a>
                    <a href="{% url 'contact' %}" class="nav-item nav-link">Contact</a>
                    <a href="{% url 'check_status' %}" class="nav-item nav-link">Check&nbsp;Status</a>
                    <a href="{% url 'loan_step' 1 %}" class="nav-item nav-link bg-primary text-white ms-2 active">Apply&nbsp;Now</a>
                </div>
            </div>
            <div class="d-none d-xl-flex flex-shrink-0 ps-4">
                <a href="tel:+02039512735" class="btn btn-light btn-lg-square rounded-circle position-relative wow tada" data-wow-delay=".9s">
                    <i class="fa fa-phone-alt fa-2x"></i>
                    <div class="position-absolute" style="top: 7px; right: 12px;">
                        <span><i class="fa fa-comment-dots text-secondary"></i></span>
                    </div>
                </a>
                <div class="d-flex flex-column ms-3">
                    <span>Call to Our Experts</span>
                    <a href="tel:+4402039512735"><span class="text-dark">Free: +44 020 3951 2735</span></a>
                </div>
            </div>
        </nav>
    </div>
</div>
<!-- Navbar & Hero End -->

<!-- Header Start -->
<div class="container-fluid bg-breadcrumb">
    <div class="container text-center py-5" style="max-width: 900px;">
        <h4 class="text-white display-4 mb-4 wow fadeInDown" data-wow-delay="0.1s">Apply Now</h4>
        <ol class="breadcrumb d-flex justify-content-center mb-0 wow fadeInDown" data-wow-delay="0.3s">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-item active text-primary">Apply Now</li>
        </ol>    
    </div>
</div>
<!-- Header End -->

<div style="background-color: #F2F5F9; padding: 20px 0;">
    <div class="loan-layout-wrapper">
        <!-- LEFT COLUMN -->
        <div class="side-column left">
            <h3>Application TipsðŸ’¡</h3>
            <ul>
                <li>Ensure accurate info</li>
                <li>Track status after submit</li>
            </ul>
            <p style="margin-top: 20px; font-size: 17px;"><strong>ðŸ“ž Need Help?</strong><br>+44 020 3951 2735</p>
        </div>
        <div class="form-column">
            <div class="container" id="container">
                <!-- Progressbar -->
                <ul id="progressbar">
                    <li class="{% if step > 1 %}completed{% elif step == 1 %}active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Loan Details</span>
                    </li>
                    <li class="{% if step > 2 %}completed{% elif step == 2 %}completed active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Personal Details</span>
                    </li>
                    <li class="{% if step > 3 %}completed{% elif step == 3 %}completed active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Home Details</span>
                    </li>
                    <li class="{% if step > 4 %}completed{% elif step == 4 %}completed active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Employee Details</span>
                    </li>
                    <li class="{% if step > 5 %}completed{% elif step == 5 %}completed active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Bank Details</span>
                    </li>
                    <li class="{% if step > 5 %}completed{% elif step == 6 %}active{% endif %}">
                        <span style="color: #2098ce; font-weight: 700;">Terms Details</span>
                    </li>
                </ul>
            
                <form method="post" action="{% url 'loan_step' step %}" id="msform" novalidate>
                    {% csrf_token %}
                    <fieldset>
                        <h2 class="fs-title">Loan Application - Step {{ step }} of 6</h2>
                        {% for field in form %}
                            <div class="form-group">
                                {% if field.field.widget.input_type == "checkbox" %}
                                    <div class="checkbox-inline">
                                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                        {{ field }}
                                    </div>
                                {% else %}
                                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                    {{ field }}
                                {% endif %}
                                {% if field.errors %}
                                    <div style="color: red;">{{ field.errors }}</div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <div class="buttons">
                            {% if step > 1 %}
                                <button name="previous" type="submit" class="action-button-previous">&larr; Previous</button>
                            {% endif %}
                            <button name="next" type="submit" class="action-button">
                                {% if step == 6 %}Submit{% else %}Next &rarr;{% endif %}
                            </button>
                        </div>
                    </fieldset>                    
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $("fieldset").css({ opacity: 0, transform: 'scale(1.05)' }).animate({
            opacity: 1
        }, {
            duration: 600,
            step: function(now, fx) {
                $(this).css('transform', `scale(${1.05 - (now * 0.05)})`);
            }
        });
    });
</script>
{% endblock content %}
